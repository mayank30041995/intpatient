<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../partials/head') %>
</head>

<body class="font-sans text-white">
  <!-- ================= HEADER ================= -->
  <%- include('../partials/header') %>

    <!-- ================= CONTACT SECTION ================= -->
    <section class="relative z-10 min-h-screen flex items-center py-20">
      <!-- Background Image -->
      <div class="absolute inset-0 -z-10 h-full">
        <img src="/images/infrastructure/i1.jpeg" alt="" class="w-full h-full object-cover" />
        <div class="absolute inset-0 bg-black/60"></div>
      </div>

      <div class="max-w-7xl mx-auto px-6 w-full py-5">
        <!-- Title -->
        <div class="text-center py-16">
          <h2 class="text-4xl font-bold text-white uppercase">Sanjeevani Contacts</h2>
          <p class="mt-3 text-gray-300">
            Get in touch with us for appointments and enquiries
          </p>
        </div>

        <!-- Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-start">
          <!-- LEFT : CONTACT INFO -->
          <div
            class="bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl p-8 space-y-8 text-white">
            <div>
              <h3 class="text-2xl font-semibold mb-3">Sanjeevani Contacts</h3>
              <p class="text-gray-200 leading-relaxed">
                <strong>Address:</strong> Located in Gohana, Sonipat
                (Haryana)<br />
                <strong>Phone:</strong>
                <a href="tel:+918059800895" class="text-green-400 font-medium">
                  +91 8059800895
                </a>
                (24 × 7)<br />
                <strong>Email:</strong>
                <a href="mailto:skss.gohana@gmail.com" class="text-green-400 font-medium">
                  skss.gohana@gmail.com
                </a>
              </p>
            </div>

            <hr class="border-white/20" />

            <div>
              <h3 class="text-2xl font-semibold mb-3">Sanjeevani Contacts</h3>
              <p class="text-gray-200 leading-relaxed">
                <strong>Address:</strong> Inside Shri Ram Sharnam Ashram, Jind
                Road, Gohana, Haryana 131301<br />
                <strong>Phone:</strong>
                <a href="tel:+918607000895" class="text-green-400 font-medium">
                  +91 8607000895 </a><br />
                <strong>Email:</strong>
                <a href="mailto:skss.gohana@gmail.com" class="text-green-400 font-medium">
                  skss.gohana@gmail.com
                </a>
              </p>
            </div>
          </div>

          <!-- RIGHT : MAP -->
          <div
            class="bg-white/10 backdrop-blur-md rounded-2xl border border-white/20 shadow-2xl overflow-hidden h-[450px]">
            <iframe class="w-full h-full border-0" loading="lazy" allowfullscreen
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=29.1401,76.7033&z=15&output=embed">
            </iframe>
          </div>
        </div>

        <!-- ================= CONTACT FORM SECTION ================= -->
        <div class="grid grid-cols-1 gap-5 items-start py-20">
          <div class="max-w-5xl mx-auto w-full px-6">
            <!-- Section Title -->
            <div class="text-center mb-12">
              <h2 class="text-4xl font-bold text-white uppercase">Send Us a Message</h2>
              <p class="mt-3 text-gray-300">
                Fill out the form below and we’ll get back to you as soon as
                possible.
              </p>
            </div>

            <!-- Form -->
            <form id="contactForm"
              class="bg-white/10 backdrop-blur-md rounded-2xl p-8 space-y-6 border border-white/20 shadow-2xl text-white">
              <!-- Honeypot (hidden) -->
              <input type="text" name="company" autocomplete="off" tabindex="-1" style="display:none">

              <!-- Time-based protection -->
              <input type="hidden" name="formStart" value="<%= Date.now() %>">

              <!-- Name -->
              <div>
                <label class="block mb-2 font-semibold">Name *</label>
                <input type="text" id="name" required
                  class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30" />
              </div>

              <!-- Email -->
              <div>
                <label class="block mb-2 font-semibold">Email *</label>
                <input type="email" id="email" required
                  class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30" />
              </div>

              <!-- Message -->
              <div>
                <label class="block mb-2 font-semibold">Message *</label>
                <textarea id="message" rows="5" required
                  class="w-full px-4 py-3 rounded-lg bg-white/20 border border-white/30"></textarea>
              </div>

              <!-- Google reCAPTCHA -->
              <!-- <div class="g-recaptcha" data-sitekey="YOUR_SITE_KEY"></div> -->

              <p id="formResponse" class="text-sm text-center"></p>

              <div class="text-center">
                <button class="bg-green-400 hover:bg-green-500 px-6 py-3 rounded-lg font-bold">
                  Send Message
                </button>
              </div>
            </form>

            <script src="https://www.google.com/recaptcha/api.js" async defer></script>

          </div>
        </div>
      </div>
    </section>

    <!-- ================= FOOTER ================= -->
    <%- include('../partials/footer') %>
      <!-- <script src="https://www.google.com/recaptcha/api.js" async defer></script> -->

      <script>
        document.getElementById("contactForm").addEventListener("submit", async (e) => {
          e.preventDefault();

          const responseEl = document.getElementById("formResponse");
          responseEl.textContent = "Sending...";
          responseEl.className = "text-white";

          const payload = {
            name: document.getElementById("name").value.trim(),
            email: document.getElementById("email").value.trim(),
            message: document.getElementById("message").value.trim(),
            company: document.querySelector('input[name="company"]').value,
            formStart: document.querySelector('input[name="formStart"]').value,
            // captcha: grecaptcha.getResponse() // enable later
          };

          try {
            const res = await fetch("/send-email", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(payload),
            });

            const data = await res.json();

            responseEl.textContent = data.message || "Success";
            responseEl.className = res.ok ? "text-green-400" : "text-red-400";

            if (res.ok) {
              document.getElementById("contactForm").reset();
              // grecaptcha.reset(); // enable later

              if (data.redirect) {
                setTimeout(() => {
                  window.location.href = data.redirect;
                }, 2000); // 2-second delay
              }
            }
          } catch (err) {
            console.error(err);
            responseEl.textContent = "Server error. Try again.";
            responseEl.className = "text-red-400";
          }
        });
      </script>


      <script src="/js/main.js"></script>
</body>

</html>